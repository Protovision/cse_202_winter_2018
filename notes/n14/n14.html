<html>
	
	<head>
		<title>CSE 202: Preprocessor</title>
		<link rel="stylesheet" type="text/css" href="../../main.css">
	</head>

	<body>
		<div class="course">CSE 202: Computer Science II, Winter 2018</div>
    
                <ul class="nav">
                        <li><a href="../../index.html">Announcements</a></li>
                        <li><a href="../../syllabus.html">Syllabus</a></li>
                        <li><a href="../../notes.html">Lecture notes</a></li>
                        <li><a href="../../labs.html">Labs</a></li>
                        <li><a href="../../quizzes.html">Quizzes</a></li>
                        <li><a href="../../external.html">External links</a></li>
                </ul>

		<div class="title">Preprocessor</div>

		<p>The preprocessor is a program that is a part of, or built into, every C++ compiler. It is responsible for processing all preprocessor directives in your source code.</p>

		<p>A preprocessor directive is any line that begins with the # character. <tt>#include &lt;iostream&gt;</tt> is a preprocessor directive.</p>

		<div class="section">#include</div>

		<p>The include directive takes the contents of a file (typically a C++ header file), and inserts it into the current file at the current line.</p>

		<p>If the filename is enclosed in angle brackets (for example: <tt>#include &lt;iostream&gt;</tt>), then the file is searched for in the standard include directories ("standard" relative to the operating system or compiler). When including standard header files such as iostream, string, and cmath, then you would use angle brackets in the include directive.</p>

		<p>If the filename is enclosed in double quotes (for example: <tt>#include "common.h"</tt>), then the file is searched for relative to the directory in which the current source file resides. When including your own header files in your own project, then double quotes should be used in the include directive.</p>

		<div class="section">#error</div>

		<p>The error directive stops compilation and displays an error message. For example: <tt>#error This header file is obsolete. Please use the newest version</tt>.</p>

		<div class="section">#define and #undef</div>

		<p>#define is used to create object-like macros and function-like macros.</p>

		<p>A line such as <tt>#define PROJECT_VERSION 1.1</tt> will replace all occurrences of the identifier <tt>PROJECT_VERSION</tt> with 1.1 in all of your source code, regardless of the scope in which they occur. The directive <tt>#undef PROJECT_VERSION</tt> undefines the macro <tt>PROJECT_VERSION</tt> which was previously created with <tt>#define</tt>.</p>

		<p>Here are some standard, predefined macros:</p>

		<table>
			<tr>
				<th>Macro</th>
				<th>Description</th>
			</tr>
			<tr>
				<td><tt>__cplusplus</tt></td>
				<td>The version of C++ standard being used, represented as a <tt>long int</tt>. Expands to <tt>199711L</tt> for C++98, <tt>201103L</tt> for C++11, <tt>201402L</tt> for C++14, and <tt>201703L</tt> for C++17.</td>
			</tr>
			<tr>
				<td><tt>__FILE__</tt></td>
				<td>Expands to the name of the current file, represented as a null-terminated string literal.</td>
			</tr>
			<tr>
				<td><tt>__LINE__</tt></td>
				<td>Expands to the current line number, represented as an <tt>int</tt></td>
			</tr>
			<tr>
				<td><tt>__DATE__</tt></td>
				<td>Expands to the current date, represented as a null-terminated string literal in the same format as generated by the function <tt>std::asctime</tt></td>
			</tr>
			<tr>
				<td><tt>__TIME__</tt></td>
				<td>Expands to the current time, represented as a null-terminated string literal in the format "hh:mm:ss".</td>
			</tr>
		</table>

		<div class="section">Conditional preprocessor directives</div>

		<p>The <tt>__cplusplus</tt> macro is especially useful if you want to take advantage of newer C++ features if they are supported.</p>

		<p>In the following example, <tt>#if</tt>, <tt>#else</tt>, and <tt>#endif</tt> is used to choose how to initialize a vector type based on the version of C++ we're using:</p>

		<code>
#if __cplusplus &gt;= 201103L
std::vector&lt;int&gt; v{{10, 20, 30}};
#else
std::vector&lt;int&gt; v;
v.push_back(10);
v.push_back(20);
v.push_back(30);
#endif
		</code>

		<p>C++11 allows a vector variable to be directly initialized with an initializer list. In prior versions of C++ you either have to repeatedly call <tt>push_back</tt> or call <tt>assign</tt> with an existing array or container to achieve the same effect. Most compilers use C++98 by default. </p>

		<p>The condition of an #if directive must be a constant expression. #elif is also provided as the preprocessor equivalent to an "else if" clause.</p>

		<p>The unary function-like operator <tt>defined</tt> can be used in the condition of #if or #elif to check if a macro is defined. For example, the directive:</p>

		<code>
#if defined(abs)
#undef abs
#endif
		</code>

		<p>undefines abs if it exists as a macro. The directive <tt>#ifdef X</tt> is equivalent to <tt>#if defined(X)</tt> and <tt>#ifndef X</tt> is equivalent to <tt>#if !defined(X)</tt>.</p>

	</body>
</html>
